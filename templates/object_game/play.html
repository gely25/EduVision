{% extends 'base.html' %}
{% load static %}

{% block title %}Juego - EduVision{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/object_game/play.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<div class="game-container">
  <h2>ğŸ¯ Â¡MuÃ©strame el objeto correcto!</h2>

  <!-- ğŸ§  Estado del jugador -->
  <div class="status">
    <p id="instruccion">Cuando estÃ©s listo, activa tu cÃ¡mara ğŸ‘‡</p>
    <p><strong>Puntaje:</strong> <span id="score">0</span> / {{ palabras|length|default:50|add:"0" }}</p>
  </div>

  <!-- ğŸ“¸ Zona de cÃ¡mara -->
  <div class="video-wrapper" id="videoContainer">

    <!-- ğŸ”´ Indicador de cÃ¡mara activa -->
    <div class="status-badge" id="statusBadge" style="display:none;">
      <i class="fas fa-circle"></i> <span id="statusText">En vivo</span>
    </div>

    <!-- ğŸ”’ CÃ¡mara inactiva -->
    <div class="camera-inactive" id="cameraInactive">
      <i class="fas fa-video-slash camera-icon"></i>
      <h3>CÃ¡mara desactivada</h3>
      <p>Activa tu cÃ¡mara para comenzar la partida y mostrar los objetos que aprendiste ğŸ“š</p>

      <!-- Botones de control -->
      <div class="button-group">
        <button class="btn" id="startCameraBtn">
          <i class="fas fa-play"></i> Activar cÃ¡mara
        </button>
        <button class="btn next" id="nextBtn" style="display:none;">
          â¡ï¸ Siguiente objeto
        </button>
      </div>
    </div>

    <!-- ğŸ¥ Imagen del frame detectado -->
    <img id="tm-frame" src="" alt="Vista de cÃ¡mara" style="display:none;">
  </div>

  <!-- ğŸ’¬ Mensajes y feedback -->
  <p id="feedback" class="feedback"></p>

  <!-- ğŸ BotÃ³n de finalizar -->
  <button class="btn-secondary" id="finishBtn" style="display:none;">ğŸ Terminar partida</button>

  <!-- ğŸ¤– Avatar de Eva -->
  <div class="eva-avatar">
    <img src="{% static 'img/eva-bot.png' %}" alt="Eva bot">
  </div>
</div>

<!-- ğŸ”¤ Pasamos las palabras desde Django al JS -->
<script>
  const palabrasJuego = {{ palabras|safe }};
</script>

{% block extra_js %}
<script src="{% static 'js/object_game/play.js' %}"></script>
{% endblock %}
{% endblock %}
